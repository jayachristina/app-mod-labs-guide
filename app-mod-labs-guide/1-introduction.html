<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction :: Application Modernization Labs Guide</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/course-template/app-mod-labs-guide/1-introduction.html">
    <link rel="next" href="2-assessment.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/course-template">Application Modernization Labs Guide</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="app-mod-labs-guide" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="1-introduction.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="1-introduction.html">1. Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2-assessment.html">2. Assessment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="3-analyze.html#package">3. Analyze</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="4-refactor.html#deploy">4. Refactor</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="5-rehost.html#deploy">5. Rehost</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="6-deploy-to-kubernetes.html#deploy">5. Deploy to Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="7-enhance-apps.html#deploy">7. Enhance apps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="8-summary.html#deploy">8. Summary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="1-introduction.html" class="home-link is-current"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="1-introduction.html">Application Modernization Labs Guide</a></li>
    <li><a href="1-introduction.html">1. Introduction</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/jayachristina/app-mod-labs-guide/edit/master/documentation/modules/ROOT/pages/1-introduction.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Introduction</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Application modernization strategies are often categorized into the <code>6R</code>’s framework that was popularized by Amazon (and prior the 5Rs by Gartner). Here is what they mean.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/mod-strategies.png" alt="Modernization Strategies">
</div>
</div>
<div class="paragraph">
<p>Red Hat helps our customers' application modernization journey with this approach:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/app-mod-approach.png" alt="Modernization Approach">
</div>
</div>
<div class="paragraph">
<p>This demo will walk you thorough 2 phases (<em>Assess</em>, <em>Rationalize</em>) as following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Assessment of the legacy application using <a href="https://www.konveyor.io/tools/tackle/" target="_blank" rel="noopener">Konveyor Tackle</a></p>
</li>
<li>
<p>Analysis of the legacy application archive and refactor the application using <a href="https://access.redhat.com/documentation/en-us/migration_toolkit_for_applications/5.3" target="_blank" rel="noopener">Migration Toolkit for Applications</a></p>
</li>
<li>
<p>Deploy the modernized applications to Kubernetes/OpenShift using <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.10/html-single/cicd/index#gitops" target="_blank" rel="noopener">OpenShift GitOps (ArgCD)</a></p>
</li>
<li>
<p>Migration of a database to OpenShift virtualization using <a href="https://access.redhat.com/documentation/en-us/migration_toolkit_for_virtualization/2.3" target="_blank" rel="noopener">Migration Toolkit for Virtualization</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_explore_the_environment"><a class="anchor" href="#_explore_the_environment"></a>Explore the environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Your initial demo environment has the whole microservices applications deployed and working.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/architecture_initial.png" alt="architecture_initial">
</div>
</div>
<div class="paragraph">
<p>Your initial state for this demo is an environment that is spread over Red Hat Virtualization and Red Hat OpenShift Container Platform.</p>
</div>
<div class="paragraph">
<p>Your application has been partially already moved from your legacy environments to OpenShift.</p>
</div>
<div class="paragraph">
<p>The application is a multi service application consisting of a Node.js frontend service which is getting its data via a gateway service. The gateway service is connected to three backend services: customers, orders and inventory. Each of the backend services uses its own database to store data.</p>
</div>
<div class="paragraph">
<p>The services running no OpenShift are deployed in a namespace <code>retail</code>. The services are also managed using a GitOps approach by <strong>ArgoCD</strong>.</p>
</div>
<div class="paragraph">
<p>All source code for the applications as well as the GitOps YAML manifests for all services are stored in a (GitHub compatible) Gitea repository that for demo purposes is hosted on the OpenShift cluster.</p>
</div>
<div class="paragraph">
<p>The problem right now is the customers service:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The customers service uses an old Java code base running on Apache Tomcat in a VM on Red Hat Virtualization. In the course of this demonstration you will modernize the Java Code and then deploy the application to OpenShift on top of Red Hat Web Server.</p>
</li>
<li>
<p>The customers database is using an Oracle 21c database running as a VM in Red Hat Virtualization. Because this is Oracle you can not deploy the database as a Pod on OpenShift - therefore you will migrate the VM to OpenShift Virtualization using the OpenShift Migration Toolkit for Virtualization.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you have finished this demonstration your deployment architecture should look like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/architecture_completed.png" alt="architecture_completed">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openshift_configuration"><a class="anchor" href="#_openshift_configuration"></a>OpenShift Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_openshift_cluster"><a class="anchor" href="#_openshift_cluster"></a>OpenShift Cluster</h3>
<div class="paragraph">
<p>Your OpenShift cluster is already configured with everything you need. Here are the details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Latest stable OpenShift Container Platform 4.10 is deployed as a bare metal single node OpenShift environment.</p>
</li>
<li>
<p>The following operators have been installed and configured:</p>
<div class="ulist">
<ul>
<li>
<p>Gitea (to host the source code repositories)</p>
</li>
<li>
<p>OpenShift Virtualization (to ultimately run the migrated Oracle VM)</p>
</li>
<li>
<p>Migration Toolkit for Virtualization (to facilitate the migration of the Oracle VM from Red Hat Virtualization to Red Hat OpenShift Container Platform)</p>
</li>
<li>
<p>OpenShift GitOps: to manage the deployed services using a GitOps approach through ArgoCD</p>
</li>
<li>
<p>OpenShift Pipelines: to build the customer application from source code and deploy to the <code>retail</code> project using GitOps</p>
</li>
<li>
<p>Migration Toolkit for Applications (Tackle): to help modernize the customer service Java source code.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Instructions on how to access the OpenShift console, Gitea or Migration Toolkit for Applications along with userids and passwords can be found in the provisioning e-mail.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bastion_vm"><a class="anchor" href="#_bastion_vm"></a>Bastion VM</h3>
<div class="paragraph">
<p>Your Bastion VM for the cluster has all the necessary tools installed (<code>oc</code>, <code>virtctl</code>, <code>tkn</code>). It also has a copy of the <code>appmod-enablement</code> repository in your home directory.</p>
</div>
<div class="paragraph">
<p>Instructions on how to access the bastion VM can be found in the provisioning e-mail.</p>
</div>
</div>
<div class="sect2">
<h3 id="_visual_studio_code_server"><a class="anchor" href="#_visual_studio_code_server"></a>Visual Studio Code (Server)</h3>
<div class="paragraph">
<p>To facilitate an easy demonstration environment the bastion has a Visual Studio Code Server installed. This means you don&#8217;t need to install and configure VSCode on your demo laptop but you can just use the one provided in a web browser.</p>
</div>
<div class="paragraph">
<p>This makes it easy to change any source code (or configuration files) in the cloned repository.</p>
</div>
<div class="paragraph">
<p>The URL and password for the VSCode Server can be found in the provisioning e-mail.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/vscode.png" alt="VSCode">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You see the configuration file for the <strong>gateway</strong> service in the screenshot above. You will notice that two services (orders and inventory) point to the services on OpenShift and that the customers service points to the customers VM on RHV.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_demonstrating_the_application"><a class="anchor" href="#_demonstrating_the_application"></a>Demonstrating the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can show that the application is working in its current deployment.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Find the <code>Route</code> for the <strong>Frontend</strong> application</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">oc get route ordersfrontend -n retail</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-texinfo hljs" data-lang="texinfo">NAME             HOST/PORT                                                          PATH   SERVICES         PORT   TERMINATION     WILDCARD
ordersfrontend   ordersfrontend-retail.apps.cluster-amawk.amawk.devel.opentlc.com          ordersfrontend   web    edge/Redirect   None</code></pre>
</div>
</div>
</li>
<li>
<p>Navigate to the orders frontend route. You can use either https or http (which will be redirected to http).</p>
<div class="imageblock">
<div class="content">
<img src="_images/frontend.png" alt="Frontend">
</div>
</div>
</li>
<li>
<p>Click through the three panels on the left.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Customer doesn&#8217;t work (bug in the code)</p>
</li>
<li>
<p>Orders shows current orders. You can tell that customers is working beause the first two columns are populated by the customers service</p>
</li>
<li>
<p>Products shows the current inventory</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_demonstrating_the_oracle_database"><a class="anchor" href="#_demonstrating_the_oracle_database"></a>Demonstrating the Oracle Database</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_connect_using_dbeaver"><a class="anchor" href="#_connect_using_dbeaver"></a>Connect using DBeaver</h3>
<div class="paragraph">
<p>You can use <a href="https://dbeaver.io" target="_blank" rel="noopener">DBeaver (Community Edition)</a> to connect to the Oracle database on Red Hat Virtualization (RHV).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Launch <strong>DBeaver</strong></p>
</li>
<li>
<p>Right click the <strong>Database Navigator</strong> Panel and select <strong>Create</strong> &#8594; <strong>Connection</strong></p>
</li>
<li>
<p>Select <strong>Oracle</strong> and click <strong>Next</strong></p>
</li>
<li>
<p>Fill in the properties (use the values from your welcome e-mail), leave default values where not specified otherwise</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Host</strong>: <code>&lt;from the e-mail&gt;</code></p>
</li>
<li>
<p><strong>Database</strong>: <code>XEPDB1</code></p>
</li>
<li>
<p><strong>Username</strong>: <code>customer</code></p>
</li>
<li>
<p><strong>Password</strong>: <code>redhat</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Test Connection &#8230;&#8203;</strong>. You should see a success message.</p>
</li>
<li>
<p>Click <strong>Finish</strong></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Next you can show the contents of the database:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Expand <strong>XEPDB1</strong> then expand <strong>Schemas</strong></p>
</li>
<li>
<p>Expand <strong>CUSTOMER</strong> then expand <strong>Tables</strong></p>
</li>
<li>
<p>Double click on <strong>CUSTOMERS</strong> under <strong>Tables</strong></p>
</li>
<li>
<p>On the right you can show the table properties (first tab) and table properties (<strong>Data</strong> tab)</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/customer-dbms.png" alt="Connect using DBeaver">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_demo_the_customer_application_deployed_on_tomcat"><a class="anchor" href="#_demo_the_customer_application_deployed_on_tomcat"></a>Demo the Customer Application deployed on Tomcat</h3>
<div class="paragraph">
<p>The RHV environment not only has the Oracle Database VM deployed but it also hosts another VM which runs the old customer application on top of Apache Tomcat.</p>
</div>
<div class="paragraph">
<p>From a terminal window you can use <code>curl</code> to demonstrate that the application is connected to the database.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the IP Address of the <strong>Customer Service (Tomcat VM)</strong> to access the customer service.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">curl http://YOUR_Tomcat_VM_IP_ADDR:8080/customers/customers/1</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-texinfo hljs" data-lang="texinfo">{"id":1,"username":"phlegm_master_19","name":"Guybrush","surname":"Threepwood","address":"1060 West Addison","zipCode":"ME-001","city":"Melee Town","country":"Melee Island"}</code></pre>
</div>
</div>
</li>
<li>
<p>Try another customer</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">curl http://169.60.225.219:8080/customers/customers/2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-texinfo hljs" data-lang="texinfo">{"id":2,"username":"hate_guybrush","name":"Pirate","surname":"Lechuck","address":"Caverns of Meat, no number","zipCode":"MO-666","city":"Giant Monkey Head","country":"Monkey Island"}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>➡️ Next section: <a href="./2-assessment.adoc">2 - Assessment</a></p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="next"><a href="2-assessment.html">2. Assessment</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
